# Linters Configuration

This document describes the linting setup for the Flooding Islands project.

## Overview

The project uses comprehensive linting and formatting tools for both backend and frontend code, with pre-commit hooks to automatically enforce code quality standards.

## Backend (Python)

### Tool: Ruff

Ruff is a fast Python linter and formatter that combines the functionality of multiple tools (flake8, isort, black, pyupgrade, etc.).

**Configuration**: `backend/pyproject.toml`

**Enabled Rules**:
- E, W: pycodestyle errors and warnings
- F: pyflakes
- I: isort (import sorting)
- N: pep8-naming
- UP: pyupgrade (modern Python syntax)
- B: flake8-bugbear (bug detection)
- C4: flake8-comprehensions
- SIM: flake8-simplify
- RET: flake8-return
- ARG: flake8-unused-arguments
- PTH: flake8-use-pathlib

**Line Length**: 88 characters (Black-compatible)

**Target Version**: Python 3.11+

### Running Backend Linters

```bash
cd backend
source venv/bin/activate

# Check for linting issues
ruff check .

# Auto-fix issues
ruff check . --fix

# Format code
ruff format .
```

## Frontend (TypeScript/React)

### Tools: ESLint + Prettier

- **ESLint**: Linting for TypeScript and React code
- **Prettier**: Code formatting

**ESLint Configuration**: `frontend/.eslintrc.cjs`
**Prettier Configuration**: `frontend/.prettierrc`

**Prettier Settings**:
- Single quotes
- 2-space indentation
- 100-character line width
- Trailing commas (ES5)
- Semicolons required

**ESLint Plugins**:
- @typescript-eslint (TypeScript support)
- react-hooks (React hooks rules)
- react-refresh (Vite React refresh)
- prettier (Prettier integration)

### Running Frontend Linters

```bash
cd frontend

# Check for linting issues
npm run lint

# Auto-fix linting issues
npm run lint:fix

# Format code with Prettier
npm run format

# Check formatting without writing
npm run format:check
```

## Pre-commit Hooks

Pre-commit hooks are configured to automatically run linters before each commit.

**Configuration**: `.pre-commit-config.yaml`

### Hooks Enabled

1. **General**:
   - trailing-whitespace: Remove trailing whitespace
   - end-of-file-fixer: Ensure files end with newline
   - check-yaml: Validate YAML syntax
   - check-added-large-files: Prevent large files
   - check-merge-conflict: Detect merge conflicts
   - mixed-line-ending: Ensure consistent line endings

2. **Backend**:
   - Ruff linter (auto-fix enabled)
   - Ruff formatter

3. **Frontend**:
   - Prettier (auto-format)
   - ESLint (auto-fix enabled)

### Using Pre-commit Hooks

```bash
# Install hooks (already done)
pre-commit install

# Run hooks manually on all files
pre-commit run --all-files

# Run hooks manually on staged files
pre-commit run

# Update hook versions
pre-commit autoupdate
```

## CI/CD Integration

To integrate linting into CI/CD pipelines:

### Backend
```bash
cd backend
source venv/bin/activate
ruff check .
ruff format --check .
```

### Frontend
```bash
cd frontend
npm run lint
npm run format:check
```

## IDE Integration

### VS Code

Install extensions:
- **Python**: ms-python.python
- **Ruff**: charliermarsh.ruff
- **ESLint**: dbaeumer.vscode-eslint
- **Prettier**: esbenp.prettier-vscode

Add to `.vscode/settings.json`:
```json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "[python]": {
    "editor.defaultFormatter": "charliermarsh.ruff",
    "editor.formatOnSave": true
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

### Cursor

Cursor supports the same extensions and configuration as VS Code.

## Status

✅ All backend Python code passes Ruff checks (zero errors)
✅ All frontend TypeScript/React code passes ESLint and Prettier checks (zero errors/warnings)
✅ Pre-commit hooks installed and tested successfully
✅ All code follows consistent style guidelines
